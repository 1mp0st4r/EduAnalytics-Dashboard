<!DOCTYPE html>
<html>
<head>
    <title>Login Test</title>
</head>
<body>
    <h1>Login Flow Test</h1>
    <button onclick="testQuickLogin()">Test Quick Admin Login</button>
    <button onclick="testStudentLogin()">Test Quick Student Login</button>
    <button onclick="checkLoginState()">Check Login State</button>
    <button onclick="clearLoginState()">Clear Login State</button>
    <div id="output"></div>

    <script>
        function log(message) {
            document.getElementById('output').innerHTML += '<div>' + message + '</div>';
        }

        function testQuickLogin() {
            log('üîÑ Testing quick admin login...');
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('userType', 'admin');
            localStorage.setItem('userEmail', 'admin@example.com');
            log('‚úÖ Login state set');
            
            // Test API calls
            fetch('/api/students?limit=5')
                .then(r => r.json())
                .then(data => {
                    log('üìä Students API: ' + (data.success ? 'SUCCESS' : 'FAILED'));
                    log('   Count: ' + (data.data?.length || 0));
                });
                
            fetch('/api/analytics')
                .then(r => r.json())
                .then(data => {
                    log('üìà Analytics API: ' + (data.success ? 'SUCCESS' : 'FAILED'));
                    log('   Stats available: ' + !!data.data?.statistics);
                });
        }

        function testStudentLogin() {
            log('üîÑ Testing quick student login...');
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('userType', 'student');
            localStorage.setItem('userEmail', 'student@example.com');
            log('‚úÖ Student login state set');
        }

        function checkLoginState() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const userType = localStorage.getItem('userType');
            const userEmail = localStorage.getItem('userEmail');
            log('üîç Current login state:');
            log('   isLoggedIn: ' + isLoggedIn);
            log('   userType: ' + userType);
            log('   userEmail: ' + userEmail);
        }

        function clearLoginState() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('userType');
            localStorage.removeItem('userEmail');
            log('üßπ Login state cleared');
        }

        // Check initial state
        checkLoginState();
    </script>
</body>
</html>
